var map = L.map('map').setView([14.814165319396302, 121.0724993880335], 13);

L.tileLayer('https://tile.openstreetmap.org/{z}/{x}/{y}.png', {
    maxZoom: 19,
    attribution: '&copy; <a href="http://www.openstreetmap.org/copyright">OpenStreetMap</a>'
}).addTo(map);
/*
const polygon = L.polygon([
[14.83309461760857, 121.04980253109389],
[14.827794816010321, 121.04738854304964],
[14.824029907364157, 121.04926608932195],
[14.822557115402969, 121.04775332348092],
[14.81788975063414, 121.04636930359203],
[14.817184451227803, 121.04599379434069],
[14.816655475165836, 121.0462620152345],
[14.815732356983053, 121.04633711708478],
[14.814290625113355, 121.04678772825616],
[14.813440102589054, 121.04778550998111],
[14.813025212341168, 121.04872964752728],
[14.812682927288543, 121.04900859725684],
[14.813191168535662, 121.04960941205898],
[14.812537715284662, 121.05021022686108],
[14.814342486134871, 121.05166934852342],
[14.812641438157607, 121.05788134465136],
[14.81375126975669, 121.05785988697987],
[14.815151516466134, 121.05956577186447],
[14.815919055266491, 121.06177591202942],
[14.815390076114284, 121.06264494772535],
[14.815307098916866, 121.06403969665807],
[14.814674396423397, 121.06460832495293],
[14.814560302334467, 121.06570266619968],
[14.813491963858986, 121.06661461723859],
[14.81338824139632, 121.07114218592604],
[14.813211913095845, 121.07203267929347],
[14.814466952580652, 121.07236527320178],
[14.815535286247961, 121.07180737374267],
[14.81687328894321, 121.07165717004213],
[14.8180764470997, 121.07082032085347],
[14.819984891315496, 121.07067011713696],
[14.820856131923284, 121.06898568992385],
[14.823936561676934, 121.06733344921803],
[14.82467295421781, 121.06626056564279],
[14.82597978551735, 121.06592797173447],
[14.826384279370913, 121.0653700722268],
[14.826467252365328, 121.06488727461794],
[14.827016947650034, 121.06378220453547],
[14.828282278660335, 121.06282733815354],
[14.829889860753095, 121.06287025345226],
[14.832036741970386, 121.0623016251574],
[14.832337511067784, 121.06116436856769],
[14.832026370614747, 121.0597481622484],
[14.830636604484814, 121.05853580350596],
[14.82980688909362, 121.05718397020117],
[14.830003946787103, 121.05528496627302],
[14.83172560110764, 121.0512509240302],
[14.832586423130858, 121.05060719388507],
[14.83309461760857, 121.04980253109389]
], {
    color: 'blue',
    fillColor: 'blue',
    fillOpacity: 0.2
}
).addTo(map)
*/

var statesData = {
    "type": "FeatureCollection",
    "features": [
      {
        "type": "Feature","id":"01",
        "properties": {"name":"Kaypian","density":1000.65},
        "geometry": {
          "coordinates": [
            [
                                  [121.04980253109389, 14.83309461760857],
                                  [121.04738854304964, 14.827794816010321],
                                  [121.04926608932195, 14.824029907364157],
                                  [121.04775332348092, 14.822557115402969],
                                  [121.04636930359203, 14.81788975063414],
                                  [121.04599379434069, 14.817184451227803],
                                  [121.0462620152345, 14.816655475165836],
                                  [121.04633711708478, 14.815732356983053],
                                  [121.04678772825616, 14.814290625113355],
                                  [121.04778550998111, 14.813440102589054],
                                  [121.04872964752728, 14.813025212341168],
                                  [121.04900859725684, 14.812682927288543],
                                  [121.04960941205898, 14.813191168535662],
                                  [121.05021022686108, 14.812537715284662],
                                  [121.05166934852342, 14.814342486134871],
                                  [121.05788134465136, 14.812641438157607],
                                  [121.05785988697987, 14.81375126975669],
                                  [121.05956577186447, 14.815151516466134],
                                  [121.06177591202942, 14.815919055266491],
                                  [121.06264494772535, 14.815390076114284],
                                  [121.06403969665807, 14.815307098916866],
                                  [121.06460832495293, 14.814674396423397],
                                  [121.06570266619968, 14.814560302334467],
                                  [121.06661461723859, 14.813491963858986],
                                  [121.07114218592604, 14.81338824139632],
                                  [121.07203267929347, 14.813211913095845],
                                  [121.07236527320178, 14.814466952580652],
                                  [121.07180737374267, 14.815535286247961],
                                  [121.07165717004213, 14.81687328894321],
                                  [121.07082032085347, 14.8180764470997],
                                  [121.07067011713696, 14.819984891315496],
                                  [121.06898568992385, 14.820856131923284],
                                  [121.06733344921803, 14.823936561676934],
                                  [121.06626056564279, 14.82467295421781],
                                  [121.06592797173447, 14.82597978551735],
                                  [121.0653700722268, 14.826384279370913],
                                  [121.06488727461794, 14.826467252365328],
                                  [121.06378220453547, 14.827016947650034],
                                  [121.06282733815354, 14.828282278660335],
                                  [121.06287025345226, 14.829889860753095],
                                  [121.0623016251574, 14.832036741970386],
                                  [121.06116436856769, 14.832337511067784],
                                  [121.0597481622484, 14.832026370614747],
                                  [121.05853580350596, 14.830636604484814],
                                  [121.05718397020117, 14.82980688909362],
                                  [121.05528496627302, 14.830003946787103],
                                  [121.0512509240302, 14.83172560110764],
                                  [121.05060719388507, 14.832586423130858],
                                  [121.04980253109389, 14.83309461760857]
            ]
          ],
          "type": "Polygon"
        }
      }
    ]
  }
  
  L.geoJSON(statesData).addTo(map);
  
  
  function getColor(d) {
      return d > 1000 ? '#800026' :
             d > 500  ? '#BD0026' :
             d > 200  ? '#E31A1C' :
             d > 100  ? '#FC4E2A' :
             d > 50   ? '#FD8D3C' :
             d > 20   ? '#FEB24C' :
             d > 10   ? '#FED976' :
                        '#FFEDA0';
  }
  
  function style(feature) {
      return {
          fillColor: getColor(feature.properties.density),
          weight: 2,
          opacity: 1,
          color: 'white',
          dashArray: '3',
          fillOpacity: 0.7
      };
  }
  
  L.geoJson(statesData, {style: style}).addTo(map);
  
  function highlightFeature(e) {
      var layer = e.target;
  
      layer.setStyle({
          weight: 5,
          color: '#666',
          dashArray: '',
          fillOpacity: 0.7
      });
  
      if (!L.Browser.ie && !L.Browser.opera && !L.Browser.edge) {
          layer.bringToFront();
      }
  
      info.update(layer.feature.properties);
  }
  
  function resetHighlight(e) {
      geojson.resetStyle(e.target);
      info.update();
  }
  
  var geojson;
  // ... our listeners
  geojson = L.geoJson(statesData);
  
  function zoomToFeature(e) {
      map.fitBounds(e.target.getBounds());
  }
  
  function onEachFeature(feature, layer) {
      layer.on({
          mouseover: highlightFeature,
          mouseout: resetHighlight,
          click: zoomToFeature
      });
  }
  
  geojson = L.geoJson(statesData, {
      style: style,
      onEachFeature: onEachFeature
  }).addTo(map);
  
  var info = L.control();
  
  info.onAdd = function (map) {
      this._div = L.DomUtil.create('div', 'info'); // create a div with a class "info"
      this.update();
      return this._div;
  };
  
  // method that we will use to update the control based on feature properties passed
  info.update = function (props) {
      this._div.innerHTML = '<h4>CSJDM Teenage Pregnancy Cases</h4>' +  (props ?
          '<b>' + props.name + '</b><br />' + props.density + ' pregnant / mothers'
          : 'Hover over a barangay');
  };
  
  info.addTo(map);
  
  var legend = L.control({position: 'bottomright'});
  
  legend.onAdd = function (map) {
  
      var div = L.DomUtil.create('div', 'info legend'),
          grades = [0, 10, 20, 50, 100, 200, 500, 1000],
          labels = [];
  
      // loop through our density intervals and generate a label with a colored square for each interval
      div.innerHTML +='<h4>Teenage Pregnancy</h4>' + '<h4>Population</h4>'
      for (var i = 0; i < grades.length; i++) {
          div.innerHTML +=
              '<i style="background:' + getColor(grades[i] + 1) + '"></i> ' +
              grades[i] + (grades[i + 1] ? '&ndash;' + grades[i + 1] + '<br>' : '+');
      }
  
      return div;
  };
  
  legend.addTo(map);